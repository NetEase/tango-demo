{"version":3,"file":"p__index.async.js","mappings":"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","sources":["webpack://playground/./src/helpers/mock-files.ts","webpack://playground/./src/helpers/index.tsx","webpack://playground/./src/components/foo-setter.tsx","webpack://playground/./src/helpers/prototypes.ts","webpack://playground/./src/utils/index.ts","webpack://playground/./src/demo/index.ts","webpack://playground/./src/demo/example/index.ts","webpack://playground/./src/demo/example/src/pages/index.js","webpack://playground/./src/pages/index.tsx"],"sourcesContent":["const packageJson = {\n  name: 'demo',\n  private: true,\n  dependencies: {\n    '@music163/antd': '0.2.5',\n    '@music163/tango-boot': '0.3.5',\n    react: '17.0.2',\n    'react-dom': '17.0.2',\n    'prop-types': '15.7.2',\n    tslib: '2.5.0',\n  },\n};\n\nconst tangoConfigJson = {\n  designerConfig: {\n    autoGenerateComponentId: true,\n  },\n  packages: {\n    react: {\n      version: '17.0.2',\n      library: 'React',\n      type: 'dependency',\n      resources: ['https://unpkg.com/react@{{version}}/umd/react.development.js'],\n    },\n    'react-dom': {\n      version: '17.0.2',\n      library: 'ReactDOM',\n      type: 'dependency',\n      resources: ['https://unpkg.com/react-dom@{{version}}/umd/react-dom.development.js'],\n    },\n    'react-is': {\n      version: '16.13.1',\n      library: 'ReactIs',\n      type: 'dependency',\n      resources: ['https://unpkg.com/react-is@{{version}}/umd/react-is.production.min.js'],\n    },\n    'styled-components': {\n      version: '5.3.5',\n      library: 'styled',\n      type: 'dependency',\n      resources: ['https://unpkg.com/styled-components@{{version}}/dist/styled-components.min.js'],\n    },\n    moment: {\n      version: '2.29.4',\n      library: 'moment',\n      type: 'dependency',\n      resources: ['https://unpkg.com/moment@{{version}}/moment.js'],\n    },\n    '@music163/tango-boot': {\n      description: '云音乐低代码运行时框架',\n      version: '0.3.5',\n      library: 'TangoBoot',\n      type: 'baseDependency',\n      resources: ['https://unpkg.com/@music163/tango-boot@{{version}}/dist/boot.js'],\n      // resources: ['http://localhost:9001/boot.js'],\n    },\n    '@music163/antd': {\n      description: '云音乐低代码中后台应用基础物料',\n      version: '0.2.6',\n      library: 'TangoAntd',\n      type: 'baseDependency',\n      resources: [\n        'https://unpkg.com/@music163/antd@{{version}}/dist/index.js',\n        // 'http://localhost:9002/designer.js',\n        'https://unpkg.com/antd@4.24.13/dist/antd.css',\n      ],\n      designerResources: [\n        'https://unpkg.com/@music163/antd@{{version}}/dist/designer.js',\n        'https://unpkg.com/antd@4.24.13/dist/antd.css',\n      ],\n    },\n  },\n};\n\nconst helperCode = `\nexport function registerComponentPrototype(proto) {\n  if (!proto) return;\n  if (!window.localTangoComponentPrototypes) {\n    window.localTangoComponentPrototypes = {};\n  }\n  if (proto.name) {\n    window.localTangoComponentPrototypes[proto.name] = proto;\n  }\n}\n`;\n\nconst routesCode = `\nimport Index from \"./pages/index\";\nimport Detail from \"./pages/detail\";\n\nconst routes = [\n  {\n    path: '/',\n    exact: true,\n    component: Index\n  },\n  {\n    path: '/detail',\n    exact: true,\n    component: Detail\n  },\n];\n\nexport default routes;\n`;\n\nconst storeIndexCode = `\nexport { default as app } from './app';\nexport { default as counter } from './counter';\n`;\n\nconst entryCode = `\nimport { runApp } from '@music163/tango-boot';\nimport routes from './routes';\nimport './services';\nimport './stores';\nimport './index.less';\n\nrunApp({\n  boot: {\n    mountElement: document.querySelector('#root'),\n    qiankun: false,\n  },\n\n  router: {\n    type: 'browser',\n    config: routes,\n  },\n});\n`;\n\nconst storeCounter = `\nimport { defineStore } from '@music163/tango-boot';\n\nconst counter = defineStore({\n  // state\n  num: 0,\n\n  // action\n  increment: () => counter.num++,\n\n  decrement: () => {\n    counter.num--;\n  },\n}, 'counter');\n\nexport default counter;\n`;\n\nconst viewHomeCode = `\nimport React from \"react\";\nimport { definePage } from \"@music163/tango-boot\";\nimport {\n  Page,\n  Section,\n  Button,\n  Input,\n  FormilyForm,\n  FormilyFormItem,\n  Table,\n} from \"@music163/antd\";\nimport { Space } from \"@music163/antd\";\nimport { LocalButton } from \"../components\";\nimport { OutButton } from \"../components\";\n\nclass App extends React.Component {\n  render() {\n    return (\n      <Page title={tango.stores.app.title} subTitle={111}>\n        <Section tid=\"section0\" />\n        <Section tid=\"section1\" title=\"Section Title\">\n          your input: <Input tid=\"input1\" defaultValue=\"hello\" />\n          copy input: <Input value={tango.page.input1?.value} />\n          <Table\n          columns={[\n            { title: \"姓名\", dataIndex: \"name\", key: \"name\" },\n            { title: \"年龄\", dataIndex: \"age\", key: \"age\" },\n            { title: \"住址\", dataIndex: \"address\", key: \"address\" },\n          ]}\n          tid=\"table1\"\n        />\n        </Section>\n        <Section tid=\"section2\">\n          <Space tid=\"space1\">\n            <LocalButton />\n            <OutButton />\n            <Button tid=\"button1\">button</Button>\n          </Space>\n        </Section>\n        <Section title=\"区块标题\" tid=\"section3\">\n          <FormilyForm tid=\"formilyForm1\">\n            <FormilyFormItem name=\"input1\" component=\"Input\" label=\"表单项\" />\n            <FormilyFormItem name=\"select1\" component=\"Select\" label=\"表单项\" />\n          </FormilyForm>\n        </Section>\n        <Section title=\"原生 DOM\" tid=\"section4\">\n          <h1 style={{ ...{ color: \"red\" }, fontSize: 64 }}>\n            hello world\n          </h1>\n          <div\n            style={{\n              border: \"1px solid #ccc\",\n              borderRadius: \"5px\",\n              backgroundColor: \"#f4f4f4\",\n            }}\n          >\n            <form onSubmit={tango.stores.app.submitForm} style={{\n              padding: \"10px\",\n            }}>\n              <div>\n                <label>Username:</label>\n                <input\n                  type=\"text\"\n                  id=\"username\"\n                  name=\"username\"\n                  style={{ margin: \"5px\" }}\n                />\n              </div>\n              <div>\n                <label>Password:</label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  style={{ margin: \"5px\" }}\n                />\n              </div>\n              <div>\n                <label>Role:</label>\n                <select id=\"role\" name=\"role\" style={{ margin: \"5px\" }}>\n                  <option value=\"admin\">Admin</option>\n                  <option value=\"user\">User</option>\n                </select>\n              </div>\n              <div>\n                <button\n                  type=\"submit\"\n                  style={{\n                    marginTop: '5px',\n                    padding: \"3px 10px\",\n                    backgroundColor: \"#007bff\",\n                    color: \"#fff\",\n                    border: \"none\",\n                    borderRadius: \"5px\",\n                  }}\n                >\n                  Submit\n                </button>\n              </div>\n            </form>\n          </div>\n        </Section>\n      </Page>\n    );\n  }\n}\nexport default definePage(App);\n`;\n\nexport const emptyPageCode = `\nimport React from \"react\";\nimport { definePage } from \"@music163/tango-boot\";\nimport {\n  Page,\n  Section,\n} from \"@music163/antd\";\n\nfunction App() {\n  return (<Page title=\"Detail Page\">\n    <Section></Section>\n  </Page>)\n}\n\nexport default definePage(App);\n`;\n\nconst componentsButtonCode = `\nimport React from 'react';\nimport { registerComponentPrototype } from '../utils';\n\nexport default function MyButton(props) {\n  return <button {...props}>my button</button>\n}\n\nregisterComponentPrototype({\n  name: 'LocalButton',\n  title: 'Local Button',\n  exportType: 'namedExport',\n  package: '/src/components',\n  props: [\n    { name: 'background', title: '背景色', setter: 'colorSetter'  },\n  ],\n});\n`;\n\nconst outButtonCode = `\nimport React from 'react';\n\nexport default function OutButton(props) {\n  return <button {...props}>Out button (from other file)</button>\n}\n`;\n\nconst componentsInputCode = `\nimport React from 'react';\nimport { registerComponentPrototype } from '../utils';\n\nexport default function MyInput(props) {\n  return <input {...props} />;\n}\n\nregisterComponentPrototype({\n  name: 'LocalInput',\n  title: 'Local Input',\n  exportType: 'namedExport',\n  package: '/src/components',\n  props: [\n    { name: 'color', title: '文本色', setter: 'colorSetter'  },\n  ],\n});\n`;\n\nconst componentsEntryCode = `\nexport { default as LocalButton } from './button';\nexport { default as LocalInput } from './input';\nexport { default as OutButton } from './out-button';\n`;\n\nconst storeApp = `\nimport { defineStore } from '@music163/tango-boot';\n\nexport default defineStore({\n  title: 'Page Title',\n\n  array: [1, 2, 3],\n\n  test: function() {\n    console.log('test');\n  },\n\n  submitForm: function(event) {\n    event.preventDefault();\n    const formData = new FormData(event.target);\n    const username = formData.get(\"username\");\n    const password = formData.get(\"password\");\n    const role = formData.get(\"role\");\n    console.log(\"Submitted Data:\", { username, password, role });\n  }\n}, 'app');\n`;\n\nconst serviceCode = `\nimport { defineServices } from '@music163/tango-boot';\nimport './sub';\n\nexport default defineServices({\n  longLongLongLongLongLongLongLongGet: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/cc974ffbaa7a85c77f30e4ce67deb67f/api/getUserProfile',\n    formatter: res => res.data,\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  },\n  get: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/cc974ffbaa7a85c77f30e4ce67deb67f/api/getUserProfile',\n    formatter: res => res.data,\n    headers: {\n      'Content-Type': 'application/json',\n    }\n  },\n  list: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/c45109399a1d33d83e32a59984b25b00/anchor-list-normal',\n  },\n  add: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/c45109399a1d33d83e32a59984b25b00/api/users',\n    method: 'post',\n  },\n  update: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/c45109399a1d33d83e32a59984b25b00/api/users',\n    method: 'post',\n  },\n  delete: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/c45109399a1d33d83e32a59984b25b00/api/users?id=1',\n  },\n});\n`;\n\nconst subServiceCode = `\nimport { defineServices } from '@music163/tango-boot';\n\nexport default defineServices({\n  list: {\n    url: 'https://nei.hz.netease.com/api/apimock-v2/c45109399a1d33d83e32a59984b25b00/anchor-list-normal',\n  },\n}, {\n  namespace: 'sub',\n});\n`;\n\nconst lessCode = `\nbody {\n  font-size: 12px;\n}\n`;\n\nconst cssCode = `\n* {\n  margin: 0;\n  padding: 0;\n}\n\np {\n  color: red;\n}\n`;\n\nexport const sampleFiles = [\n  { filename: '/package.json', code: JSON.stringify(packageJson) },\n  { filename: '/tango.config.json', code: JSON.stringify(tangoConfigJson) },\n  { filename: '/README.md', code: '# readme' },\n  { filename: '/src/index.less', code: lessCode },\n  { filename: '/src/style.css', code: cssCode },\n  { filename: '/src/index.js', code: entryCode },\n  { filename: '/src/pages/index.js', code: viewHomeCode },\n  { filename: '/src/pages/detail.js', code: emptyPageCode },\n  { filename: '/src/components/button.js', code: componentsButtonCode },\n  { filename: '/src/components/out-button.js', code: outButtonCode },\n  { filename: '/src/components/input.js', code: componentsInputCode },\n  { filename: '/src/components/index.js', code: componentsEntryCode },\n  { filename: '/src/routes.js', code: routesCode },\n  { filename: '/src/stores/index.js', code: storeIndexCode },\n  { filename: '/src/stores/app.js', code: storeApp },\n  { filename: '/src/stores/counter.js', code: storeCounter },\n  { filename: '/src/services/index.js', code: serviceCode },\n  { filename: '/src/services/sub.js', code: subServiceCode },\n  { filename: '/src/utils/index.js', code: helperCode },\n];\n\nexport const genDefaultPage = (index: number) => ({\n  name: 'new-page',\n  code: `\n  import React from 'react';\n  import tango, { definePage } from '@music163/tango-boot';\n  import { Page, Section } from '@music163/antd';\n\n  function App() {\n    return (\n      <Page title=\"空白模板${index}\">\n        <Section></Section>\n      </Page>\n    )\n  }\n\n  export default definePage(App);\n  `,\n});\n","import React from 'react';\nimport { Box, Group } from 'coral-system';\nimport { Avatar, Space, Switch } from 'antd';\nimport { BranchesOutlined, MenuOutlined, QuestionCircleOutlined } from '@ant-design/icons';\nimport { registerSetter } from '@music163/tango-designer';\nimport type { IVariableTreeNode } from '@music163/tango-helpers';\nimport { FooSetter } from '../components';\nimport { ToggleButton } from '@music163/tango-ui';\n\nexport * from './mock-files';\n\nexport const bootHelperVariables: IVariableTreeNode[] = [\n  {\n    key: '$helpers',\n    title: '工具函数',\n    children: [\n      {\n        title: '设置变量值',\n        key: '() => tango.setStoreValue(\"variableName\", \"variableValue\")',\n        type: 'function',\n        help: '设置状态值，tango.setStoreValue(\"variableName\", \"variableValue\")',\n      },\n      {\n        title: '获取变量值',\n        key: '() => tango.getStoreValue(\"variableName\")',\n        type: 'function',\n        help: '获取状态值',\n      },\n      { title: '打开弹窗', key: '() => tango.openModal(\"\")', type: 'function' },\n      { title: '关闭弹窗', key: '() => tango.closeModal(\"\")', type: 'function' },\n      { title: '切换路由', key: '() => tango.navigateTo(\"/\")', type: 'function' },\n      {\n        title: '拷贝到剪贴板',\n        key: '() => tango.copyToClipboard(\"hello\")',\n        type: 'function',\n      },\n    ],\n  },\n];\n\n// 注册自定义 setter\nregisterSetter({\n  name: 'fooSetter',\n  component: FooSetter,\n});\n\n// 平台 Logo\nexport function Logo() {\n  return (\n    <Box width=\"50px\" display=\"flex\" alignItems=\"center\" justifyContent=\"center\" fontSize=\"14px\">\n      <ToggleButton\n        shape=\"text\"\n        items={[\n          { label: '回到首页', key: 'home' },\n          { label: '文档', key: 'doc' },\n          { label: '设置', key: 'setting' },\n        ]}\n      >\n        <MenuOutlined />\n      </ToggleButton>\n    </Box>\n  );\n}\n\n// 项目信息\nexport function ProjectDetail({ name }: { name?: string }) {\n  return (\n    <Box display=\"flex\" alignItems=\"center\" columnGap=\"l\">\n      <Box className=\"ProjectName\" fontSize=\"18px\" fontWeight=\"bold\">\n        Tango Playground\n      </Box>\n      <Box className=\"BranchName\" as=\"code\" fontSize=\"14px\">\n        <BranchesOutlined /> {name || 'demo'}\n      </Box>\n    </Box>\n  );\n}\n\nexport function SidebarFooter() {\n  return (\n    <Space direction=\"vertical\" align=\"center\">\n      <QuestionCircleOutlined style={{ fontSize: 20 }} />\n      <Avatar src=\"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png\" />\n    </Space>\n  );\n}\n\ninterface ActionsProps {\n  defaultChecked?: boolean;\n  // eslint-disable-next-line react/no-unused-prop-types\n  onChange?: (checked: boolean) => void;\n}\n\n// 平台核心行动点\nexport function Actions({ defaultChecked }: ActionsProps) {\n  return (\n    <Group spacingX=\"8px\">\n      <Switch defaultChecked={defaultChecked} checkedChildren=\"新版\" unCheckedChildren=\"老版\" />\n    </Group>\n  );\n}\n\nexport const menuData: any = {\n  // 常用组件\n  common: [\n    {\n      title: '基本',\n      items: [\n        'Button',\n        'ButtonGroup',\n        'ActionList',\n        'Action',\n        'Image',\n        'Text',\n        'MultilineText',\n        'Link',\n        'Title',\n        'Paragraph',\n        'Icon',\n      ],\n    },\n    {\n      title: '数据和逻辑',\n      items: ['When', 'DataProvider', 'Interval', 'Each'],\n    },\n    {\n      title: '基础布局',\n      items: [\n        'Section',\n        'Columns',\n        'Box',\n        'Divider',\n        'Space',\n        'Tabs',\n        'Toolbar',\n        'Modal',\n        'Drawer',\n        'SnippetButtonGroup',\n        'Snippet2ColumnLayout',\n        'Snippet3ColumnLayout',\n        'SnippetSuccessResult',\n      ],\n    },\n    {\n      title: '表单表格',\n      items: [\n        'XTable',\n        'XEditableTable',\n        // 'Table',\n        'XForm',\n        'XFormItem',\n        'XStepForms',\n        // 'SearchForm',\n        // 'Form',\n        // 'FormItem',\n      ],\n    },\n    {\n      title: '常用图表',\n      items: [\n        'ChartContainer',\n        'BarChart',\n        'LineChart',\n        'PieChart',\n        'FunnelChart',\n        'ScatterChart',\n        'RadarChart',\n        'WordCloud',\n      ],\n    },\n    {\n      title: '导航',\n      items: [\n        'Breadcrumb',\n        'Dropdown',\n        'Menu',\n        // 'PageHeader',\n        'Pagination',\n        'Steps',\n      ],\n    },\n    {\n      title: '数据录入',\n      items: [\n        'AutoComplete',\n        'Cascader',\n        'Checkbox',\n        'CheckboxGroup',\n        'DatePicker',\n        'DateRangePicker',\n        'WeekPicker',\n        'MonthPicker',\n        'YearPicker',\n        'Input',\n        'InputNumber',\n        'InputKV',\n        'Mentions',\n        'Radio',\n        'RadioGroup',\n        'Rate',\n        'Select',\n        'Slider',\n        'Switch',\n        'Search',\n        'TextArea',\n        'TimePicker',\n        'TimeRangePicker',\n        'Transfer',\n        'TreeSelect',\n        'Upload',\n        'NosUpload',\n      ],\n    },\n    {\n      title: '数据展示',\n      items: [\n        'Avatar',\n        'Badge',\n        'RibbonBadge',\n        'Calendar',\n        'Card',\n        'Carousel',\n        'Collapse',\n        'Comment',\n        'Descriptions',\n        'Empty',\n        'Image',\n        'List',\n        'Popover',\n        'Statistic',\n        'Table',\n        'Tag',\n        'CheckableTag',\n        'Skeleton',\n        'SkeletonAvatar',\n        'SkeletonButton',\n        'SkeletonInput',\n        'SkeletonImage',\n        'SkeletonNode',\n        'Spin',\n        'Timeline',\n        'Tooltip',\n        'Tree',\n      ],\n    },\n    {\n      title: '反馈',\n      items: [\n        'Alert',\n        'Drawer',\n        // 'Message',\n        'Modal',\n        'Notification',\n        'Popconfirm',\n        'Progress',\n        'Result',\n      ],\n    },\n  ],\n};\n","import React from 'react';\n\nexport function FooSetter({ value, ...rest }: any) {\n  return <code {...rest}>fooSetter: {value}</code>;\n}\n","import * as basePrototypes from '@music163/antd/prototypes';\nimport type { IComponentPrototype, Dict } from '@music163/tango-helpers';\n\nconst sampleBlockCode = `\n<Section>\n  <Result\n      status=\"success\"\n      title=\"Successfully Purchased Cloud Server ECS!\"\n      subTitle=\"Order number: 2017182818828182881 Cloud server configuration takes 1-5 minutes, please wait.\"\n      extra={[\n        <Button type=\"primary\" key=\"console\">\n          Go Console\n        </Button>,\n        <Button key=\"buy\">Buy Again</Button>,\n      ]}\n    />\n</Section>\n`;\n\nconst SnippetSuccessResult: IComponentPrototype = {\n  name: 'SnippetSuccessResult',\n  title: '成功结果',\n  icon: 'icon-tupian',\n  type: 'snippet',\n  package: '@music163/antd',\n  initChildren: sampleBlockCode,\n  relatedImports: ['Section', 'Result', 'Button'],\n};\n\nconst Snippet2ColumnLayout: IComponentPrototype = {\n  name: 'Snippet2ColumnLayout',\n  title: '两列布局',\n  icon: 'icon-columns',\n  type: 'snippet',\n  package: '@music163/antd',\n  initChildren: `\n  <Columns columns={12}>\n    <Column colSpan={6}></Column>\n    <Column colSpan={6}></Column>\n  </Columns>\n  `,\n  relatedImports: ['Columns', 'Column'],\n};\n\nconst Snippet3ColumnLayout: IComponentPrototype = {\n  name: 'Snippet3ColumnLayout',\n  title: '三列布局',\n  icon: 'icon-column-3',\n  type: 'snippet',\n  package: '@music163/antd',\n  // FIXME: Column 组件 需要更新为 defineComponent\n  initChildren: `\n  <Columns columns={12}>\n    <Column colSpan={4}>\n    </Column>\n    <Column colSpan={4}>\n    </Column>\n    <Column colSpan={4}>\n  </Column>\n  </Columns>\n  `,\n  relatedImports: ['Columns', 'Column'],\n};\n\nconst SnippetButtonGroup: IComponentPrototype = {\n  name: 'SnippetButtonGroup',\n  title: '按钮组',\n  icon: 'icon-anniuzu',\n  type: 'snippet',\n  package: '@music163/antd',\n  initChildren: `\n  <Space>\n    <Button type=\"primary\">按钮1</Button>\n    <Button>按钮2</Button>\n  </Space>\n  `,\n  relatedImports: ['Space', 'Button'],\n};\n\n// hack some prototypes\nbasePrototypes['Section'].siblingNames = [\n  'SnippetButtonGroup',\n  'Snippet2ColumnLayout',\n  'Snippet3ColumnLayout',\n  'SnippetSuccessResult',\n];\n\nexport const nativeDomPrototypes = () => {\n  const doms = [\n    'div',\n    'span',\n    'h1',\n    'h2',\n    'p',\n    'a',\n    'img',\n    'ul',\n    'ol',\n    'li',\n    'input',\n    'button',\n    'form',\n    'table',\n    'tr',\n    'td',\n    'header',\n    'footer',\n    'nav',\n    'section',\n    'article',\n    'aside',\n    'main',\n    'video',\n    'audio',\n    'label',\n    'select',\n    'option',\n    'textarea',\n    'iframe',\n  ];\n  const componentPrototypes: Dict<IComponentPrototype> = doms.reduce(\n    (acc: Dict<IComponentPrototype>, tag) => {\n      acc[tag] = {\n        name: tag,\n        title: tag,\n        hasChildren: true,\n        package: '',\n        type: 'element',\n        props: [\n          {\n            name: 'style',\n            title: '样式',\n            group: 'style',\n            setter: 'expressionSetter',\n          },\n          {\n            name: 'className',\n            title: '类名',\n            setter: 'textSetter',\n          },\n          {\n            name: 'id',\n            title: 'ID',\n            setter: 'textSetter',\n          },\n          {\n            name: 'onClick',\n            title: '点击事件',\n            setter: 'actionSetter',\n            group: 'event',\n          },\n        ],\n      };\n      return acc;\n    },\n    {},\n  );\n  return componentPrototypes;\n};\n\n// iconfont: https://www.iconfont.cn/manage/index?manage_type=myprojects&projectId=2891794\nconst prototypes: Dict<IComponentPrototype> = {\n  ...nativeDomPrototypes(),\n  ...(basePrototypes as any),\n  SnippetSuccessResult,\n  Snippet2ColumnLayout,\n  Snippet3ColumnLayout,\n  SnippetButtonGroup,\n  Box: {\n    name: 'Box',\n    title: '盒子',\n    icon: 'icon-mianban',\n    type: 'container',\n    package: '@music163/antd',\n    hasChildren: true,\n    siblingNames: ['Box'],\n    props: [\n      {\n        name: 'aaa',\n        title: 'aaa',\n        setter: 'textSetter',\n      },\n      {\n        name: 'bbb',\n        title: 'bbb',\n        setter: 'textSetter',\n        deprecated: true,\n      },\n      {\n        name: 'ccc',\n        title: 'ccc',\n        setter: 'textSetter',\n        deprecated: true,\n      },\n      {\n        name: 'd',\n        title: 'd',\n        setter: 'textSetter',\n      },\n    ],\n  },\n  Columns: {\n    name: 'Columns',\n    type: 'container',\n    icon: 'icon-column-4',\n    package: '@music163/antd',\n    hasChildren: true,\n    childrenNames: ['Column'],\n  },\n  Column: {\n    name: 'Column',\n    type: 'container',\n    icon: 'icon-juxing',\n    package: '@music163/antd',\n    hasChildren: true,\n    siblingNames: ['Column'],\n  },\n  Text: {\n    name: 'Text',\n    type: 'element',\n    icon: 'icon-wenzi',\n    package: '@music163/antd',\n    initChildren: '文本内容',\n  },\n  Placeholder: {\n    name: 'Placeholder',\n    type: 'element',\n    package: '@music163/antd',\n  },\n  ButtonGroup: {\n    name: 'ButtonGroup',\n    type: 'element',\n    package: '@music163/antd',\n    hasChildren: true,\n    childrenNames: ['Button'],\n  },\n};\n\nexport default prototypes;\n","import { IFileConfig } from '@music163/tango-core';\nimport { sampleFiles } from '../helpers';\n\nexport type DemoItemType = {\n  title?: string;\n  description?: string;\n  files: IFileConfig[];\n  [x: string]: any;\n};\n\nexport const mergeDemo = (item: DemoItemType): DemoItemType => {\n  const { files, ...rest } = item;\n  const result = sampleFiles.filter(e => (\n    files?.every(i => i.filename !== e.filename)\n  ));\n  result.push(...files);\n\n  return {\n    ...rest,\n    files: result,\n  };\n};","import { DemoItemType, mergeDemo } from '../utils';\nimport example from './example';\n\nexport default {\n  example: mergeDemo(example),\n} as {\n  [x: string]: DemoItemType;\n};","// @ts-nocheck\nimport srcPagesIndex from '!!raw-loader!./src/pages/index.js';\n\nexport default {\n  title: 'Example',\n  files: [{\n    filename: '/src/pages/index.js', code: srcPagesIndex\n  }]\n};","export default \"import React from \\\"react\\\";\\nimport { definePage } from \\\"@music163/tango-boot\\\";\\nimport {\\n  Button,\\n  Input\\n} from \\\"@music163/antd\\\";\\nclass App extends React.Component {\\n  render() {\\n    return (\\n      <div>\\n        <Button>Hello World!</Button>\\n        <Input placeholder=\\\"This is example demo\\\" />\\n      </div>\\n    );\\n  }\\n}\\nexport default definePage(App);\";","import { Box } from 'coral-system';\nimport { Button, Form, Input, Modal, Space } from 'antd';\nimport {\n  Designer,\n  DesignerPanel,\n  SettingPanel,\n  Sidebar,\n  Toolbar,\n  WorkspacePanel,\n  WorkspaceView,\n  CodeEditor,\n  Sandbox,\n  DndQuery,\n  themeLight,\n} from '@music163/tango-designer';\nimport { createEngine, Workspace } from '@music163/tango-core';\nimport prototypes from '../helpers/prototypes';\nimport { Logo, ProjectDetail, bootHelperVariables, emptyPageCode, sampleFiles } from '../helpers';\nimport {\n  ApiOutlined,\n  AppstoreAddOutlined,\n  BuildOutlined,\n  FunctionOutlined,\n  PlusOutlined,\n  createFromIconfontCN,\n} from '@ant-design/icons';\nimport { Action, PackageOutlined } from '@music163/tango-ui';\nimport React, { useEffect, useMemo, useState } from 'react';\n\nimport demo from '../demo';\nimport { DemoItemType } from '../utils';\nimport { useLocation, useMatch } from 'umi';\n\nconst menuData = {\n  common: [\n    {\n      title: '常用',\n      items: [\n        'Button',\n        'Section',\n        'Columns',\n        'Column',\n        'Box',\n        'Text',\n        'Space',\n        'Typography',\n        'Title',\n        'Paragraph',\n        'Table',\n        'Each',\n      ],\n    },\n    {\n      title: '输入',\n      items: ['Input', 'InputNumber', 'Select'],\n    },\n    {\n      title: 'Formily表单',\n      items: ['FormilyForm', 'FormilyFormItem', 'FormilySubmit', 'FormilyReset'],\n    },\n    {\n      title: '数据展示',\n      items: ['Comment'],\n    },\n  ],\n};\n\n// 1. 实例化工作区\nconst workspace = new Workspace({\n  entry: '/src/index.js',\n  files: sampleFiles,\n  prototypes,\n});\n\n// inject workspace to window for debug\n(window as any).__workspace__ = workspace;\n\n// 2. 引擎初始化\nconst engine = createEngine({\n  workspace,\n  menuData,\n  defaultActiveView: 'design', // dual code design\n});\n\n// @ts-ignore\nwindow.__workspace__ = workspace;\n\n// 3. 沙箱初始化\nconst sandboxQuery = new DndQuery({\n  context: 'iframe',\n});\n\n// 4. 图标库初始化（物料面板和组件树使用了 iconfont 里的图标）\ncreateFromIconfontCN({\n  scriptUrl: '//at.alicdn.com/t/c/font_2891794_151xsllxqd7.js',\n});\n\n/**\n * 5. 平台初始化，访问 https://local.netease.com:6006/\n */\nexport default function App() {\n  const [showNewPageModal, setShowNewPageModal] = useState(false);\n  const [form] = Form.useForm();\n\n  const location = useLocation();\n  const match = useMatch({ path: '/:name' });\n  const name = useMemo(() => {\n    if (match?.params?.name) {\n      return match?.params?.name;\n    }\n    const query = new URLSearchParams(location.search);\n    return query.get('name') || undefined;\n  }, [match?.params, location.search]);\n\n  useEffect(() => {\n    if (!name || !demo[name]) {\n      return;\n    }\n\n    (demo[name] as DemoItemType)?.files?.forEach?.((item) => {\n      workspace.addFile(item.filename, item.code);\n    });\n  }, [name]);\n\n  return (\n    <Designer\n      theme={themeLight}\n      engine={engine}\n      config={{\n        customActionVariables: bootHelperVariables,\n        customExpressionVariables: bootHelperVariables,\n      }}\n      sandboxQuery={sandboxQuery}\n    >\n      <DesignerPanel\n        logo={<Logo />}\n        description={<ProjectDetail name={name && demo[name] && (demo[name]?.title || name)} />}\n        actions={\n          <Box px=\"l\">\n            <Toolbar>\n              <Toolbar.Item key=\"routeSwitch\" placement=\"left\" activeViews={['design']} />\n              <Toolbar.Item key=\"addPage\" placement=\"left\" activeViews={['design']}>\n                <Action\n                  tooltip=\"添加页面\"\n                  shape=\"outline\"\n                  icon={<PlusOutlined />}\n                  onClick={() => setShowNewPageModal(true)}\n                />\n              </Toolbar.Item>\n              <Toolbar.Item key=\"history\" placement=\"left\" activeViews={['design']} />\n              <Toolbar.Item key=\"preview\" placement=\"left\" activeViews={['design']} />\n              <Toolbar.Item key=\"togglePanel\" placement=\"right\" activeViews={['design']} />\n              <Toolbar.Item key=\"modeSwitch\" placement=\"right\" />\n              <Toolbar.Separator />\n              <Toolbar.Item placement=\"right\">\n                <Space>\n                  <Button type=\"primary\">发布</Button>\n                </Space>\n              </Toolbar.Item>\n            </Toolbar>\n            <Modal\n              title=\"添加新页面\"\n              open={showNewPageModal}\n              onCancel={() => setShowNewPageModal(false)}\n              footer={null}\n            >\n              <Form\n                form={form}\n                onFinish={(values) => {\n                  workspace.addViewFile(values.name, emptyPageCode);\n                  setShowNewPageModal(false);\n                }}\n                layout=\"vertical\"\n              >\n                <Form.Item label=\"文件名\" name=\"name\" required rules={[{ required: true }]}>\n                  <Input placeholder=\"请输入文件名\" />\n                </Form.Item>\n                <Form.Item>\n                  <Button type=\"primary\" htmlType=\"submit\">\n                    提交\n                  </Button>\n                </Form.Item>\n              </Form>\n            </Modal>\n          </Box>\n        }\n      >\n        <Sidebar>\n          <Sidebar.Item\n            key=\"components\"\n            label=\"组件\"\n            icon={<AppstoreAddOutlined />}\n            widgetProps={{\n              menuData,\n            }}\n          />\n          <Sidebar.Item key=\"outline\" label=\"结构\" icon={<BuildOutlined />} />\n          <Sidebar.Item\n            key=\"variables\"\n            label=\"变量\"\n            icon={<FunctionOutlined />}\n            isFloat\n            width={800}\n          />\n          <Sidebar.Item key=\"dataSource\" label=\"接口\" icon={<ApiOutlined />} isFloat width={800} />\n          <Sidebar.Item\n            key=\"dependency\"\n            label=\"依赖\"\n            icon={<PackageOutlined />}\n            isFloat\n            width={800}\n          />\n        </Sidebar>\n        <WorkspacePanel>\n          <WorkspaceView mode=\"code\">\n            <CodeEditor />\n          </WorkspaceView>\n          <WorkspaceView mode=\"design\">\n            <Sandbox\n              bundlerURL={process.env.SANDBOX_BUNDLER_URL || 'https://tango-demo.musicfe.com'}\n              onMessage={(e) => {\n                if (e.type === 'done') {\n                  const sandboxWindow: any = sandboxQuery.window;\n                  // if (sandboxWindow.TangoAntd) {\n                  // if (sandboxWindow.TangoAntd.menuData) {\n                  //   setMenuData(sandboxWindow.TangoAntd.menuData);\n                  // }\n                  // if (sandboxWindow.TangoAntd.prototypes) {\n                  //   workspace.setComponentPrototypes(sandboxWindow.TangoAntd.prototypes);\n                  // }\n                  // }\n                  if (sandboxWindow.localTangoComponentPrototypes) {\n                    workspace.setComponentPrototypes(sandboxWindow.localTangoComponentPrototypes);\n                  }\n                }\n              }}\n              navigatorExtra={<Button size=\"small\">hello world</Button>}\n            />\n          </WorkspaceView>\n        </WorkspacePanel>\n        <SettingPanel />\n      </DesignerPanel>\n    </Designer>\n  );\n}\n"],"names":["emptyPageCode","sampleFiles","filename","code","JSON","stringify","name","private","dependencies","react","tslib","designerConfig","autoGenerateComponentId","packages","version","library","type","resources","moment","description","designerResources","bootHelperVariables","key","title","children","help","Logo","_jsx","Box","width","display","alignItems","justifyContent","fontSize","ToggleButton","shape","items","label","MenuOutlined","ProjectDetail","_ref","_jsxs","columnGap","className","fontWeight","as","BranchesOutlined","registerSetter","component","value","rest","_objectWithoutProperties","_excluded","_objectSpread","SnippetSuccessResult","icon","package","initChildren","relatedImports","basePrototypes","siblingNames","item","files","result","reduce","acc","tag","hasChildren","props","group","setter","Snippet2ColumnLayout","Snippet3ColumnLayout","SnippetButtonGroup","deprecated","Columns","childrenNames","Column","Text","Placeholder","ButtonGroup","example","filter","e","every","i","push","apply","_toConsumableArray","menuData","common","workspace","Workspace","entry","prototypes","window","__workspace__","engine","createEngine","defaultActiveView","sandboxQuery","DndQuery","context","App","_demo$name2","_useState","useState","_useState2","_slicedToArray","showNewPageModal","setShowNewPageModal","_Form$useForm","Form","useForm","form","location","useLocation","match","useMatch","path","useMemo","_match$params","_match$params2","params","URLSearchParams","search","get","undefined","useEffect","_demo$name","_demo$name$forEach","demo","forEach","call","addFile","Designer","theme","themeLight","config","customActionVariables","customExpressionVariables","DesignerPanel","logo","actions","px","Toolbar","Item","placement","activeViews","Action","tooltip","PlusOutlined","onClick","Separator","Space","Button","Modal","open","onCancel","footer","onFinish","values","addViewFile","layout","required","rules","Input","placeholder","htmlType","Sidebar","AppstoreAddOutlined","widgetProps","BuildOutlined","FunctionOutlined","isFloat","ApiOutlined","PackageOutlined","WorkspacePanel","WorkspaceView","mode","CodeEditor","Sandbox","bundlerURL","onMessage","sandboxWindow","localTangoComponentPrototypes","setComponentPrototypes","navigatorExtra","size","SettingPanel","createFromIconfontCN","scriptUrl"],"sourceRoot":""}